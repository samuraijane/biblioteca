# Biblioteca – Step 06-01 [Work-in-Progress]

## Objectives
|              |                                                                                   |
|:------------ | :-------------------------------------------------------------------------------- |
| **client**   | n/a                                                                               |
| **config**   | n/a                                                                               |
| **database** | use `sequelize-cli` to automate the creation of the database and the `User` model |
| **server**   | n/a                                                                               |

## File Tree
An asterisk below denotes a new file or one that needs to be modified.
```
biblioteca
|––api
|  |––apiBooks.js
|  `––apiHeartbeat.js
|––config*
|  `––config.json*
|––css
|  `––style.css
|––js
|  `––app.js
|––migrations*
|  `––<someTimeStamp>-create-user.js*
|––models*
   |––index.js*
   `––user.js*
|––node_modules/
|––public
|  `––index.html
|––seeders*
   `––<someTimeStamp>-user.js*
|––.env*
|––.env-example
|––.gitignore
|––LICENSE.md
|––package-lock.json
|––package.json
|––README.md
|––server.js*
```


### Directories
In previous steps we've used `mkdir` when creating a new directory but this time, we'll `npx sequelize-cli init` to create the **config/**, **migrations/**, **models/**, and **seeders/** directories.

## Files
#### config.js
* This file and its parent directory are created automatically after running `npx sequelize-cli init`.
* Update the values for `username`, `database`, and `dialect` for the `development` object.

#### <someTimeStamp>-create-user.js
* This file and its parent directory are created automatically via `sequelize-cli` (see Hints below).
* There are no modifications you need to make to this file.

#### models/index.js
* This file and its parent directory are created automatically via `sequelize-cli` (see Hints below).
* There are no modifications you need to make to this file.

#### models/user.js
* This file is created automatically via `sequelize-cli` (see Hints below).
* There are no modifications you need to make to this file.

#### <someTimeStamp>-user.js
* This file is created automatically via `sequelize-cli` (see Hints below).
* Modify the code here by adding at least 3 objects to populate the database with some fake data.

#### .env
Add the key/value pairs that `sequelize` needs in order to build and connect to the database– `DB_USER`, `DB_PASSWORD`, `DB_NAME`, `DB_LOCAL_SERVER`

## Command Line
Add NPM dependencies
* `sequelize` as production dependencies (see notes in Summary below)
Initialize the project with Sequelize
* `npx sequelize-cli init`

### Before moving to the next step
* Verify that the data is writing to the database by accessing it directly with a shell.

___

## Hints
<details>
  <summary>Have you already spent 10 minutes trying to figure it out? If so, click here for hints.</summary>
    
* Add the foundation files and directories that `sequelize` needs before building the database with `npx sequelize-cli init`
* Create the database with `npx sequelize-cli db:create` (`sequelize` references **config.json** to do this)
* Create the User model with
```bash
npx sequelize-cli model:generate --name User --attributes firstName:string,lastName:string,email:string,gitHubID:integer,gitHubUsername:string
```
* Create the `User` table in the database with `npx sequelize-cli db:migrate`
* Add the template for a seed file, which will later be used to add rows to the `User` table in the database with `npx sequelize-cli seed:generate --name user`
* Seed the database with data by entering `npx sequelize-cli db:seed:all` (remember, you must have data objects in seeders/<someTimeStamp>-user.js in order for this to properly add rows to the database)
* in case you make a mistake
  * `npx sequelize-cli db:seed:undo`
  * `npx sequelize-cli db:migrate:undo`
</details>


### Summary
* When you install `sequelize`, you may get a warning that you also need to manually install `pg` and `pg-hstore`. If so, install those packages, as well.
* Be sure that the database server is running before entering any `npx sequelize-cli` commands.
* In previous steps we've used `mkdir` when creating a new directory but this time, we'll use `npx sequelize-cli init` to create directories and some files automatically.
