# Biblioteca â€“ Step 11-01 [Work-in-Progress]

### Objective
Create an protected endpoint for **/dashboard** that renders an EJS page specific to dashboard.

### Directories
* biblioteca/middleware
* biblioteca/routes
* partials/main

### Files
#### auth/index.js
* Modify the code so that the user is redirected to `/` if login fails and to `/dashboard` if login succeeds
* Pass an object that has `template` for the key and `dashboard` for the value as the second argument for `res.render`

#### middleware/ensureAuthenticated.js
* Define middleware that redirects the user to `/` if not logged in

#### routes/dashboard.js
* Create this file
* Define an endpoint at `/dashboard` that renders **pages/dashboard.ejs** when responding to a GET request

#### pages/dashboard.ejs
* Create this file
* For `<main>`, include text that says the user is logged in

#### pages/index.ejs
* Use string interpolation which uses the passed-in `template` value to create a dynamic partial

#### partials/main.ejs
* Because we are now putting more than one partial which can act as `<main>`, move this file into **partials/main**

#### partials/dashboard.ejs
* Create this file
* Add some code with text that lets the user know he/she is logged in

#### biblioteca/server.js
* require **routes/dashboard.ejs**
* `require` the `ensureAuthenticated` middleware
* pass this middleware, along with `app` to **routes/dashboard.ejs**
* Pass an object that has `template` for the key and `landing` for the value as the second argument for `res.render`

### Command Line
n/a

### Before moving to the next step

___

### Hints

### Summary
* Because we are adding a new view, or template, when the URL points to /dashboard we need to refactor how **pages/index.ejs** renders the `<main>` area.

